<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Japanese Grammar Practice</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Japanese Grammar Practice</h1>

      <p>
        This site is for studying Japanese grammar step by step. Read the
        lessons, then practice with exercises.
      </p>

      <hr />

      <!-- MAIN NAV -->
      <h2>Get started</h2>

      <ul>
        <li>
          <a href="lessons.html">üìò Lessons</a><br />
          <span class="small"> Read grammar explanations and rules </span>
        </li>

        <li style="margin-top: 10px">
          <a href="exercises.html">‚úèÔ∏è Exercises</a><br />
          <span class="small"> Practice grammar and track your progress </span>
        </li>
      </ul>

      <hr />

      <!-- ANNOUNCEMENTS -->
      <h2>üì¢ Announcements</h2>
      <div id="announcements">
        <p class="small">Loading announcements‚Ä¶</p>
      </div>

      <hr />

      <p class="small">Progress is saved locally in your browser.</p>
    </div>

    <script>
      /* ---------- SIMPLE MARKDOWN RENDERER ---------- */
      function renderMarkdown(text) {
        return (
          text
            // bold **text**
            .replace(/\*\*(.+?)\*\*/g, "<strong>$1</strong>")
            // italics *text*
            .replace(/\*(.+?)\*/g, "<em>$1</em>")
            // bullet points
            .replace(/^- (.+)$/gm, "<li>$1</li>")
            // line breaks
            .replace(/\n\n/g, "<br><br>")
            .replace(/\n/g, "<br>")
        );
      }

      /* ---------- LOAD ANNOUNCEMENTS ---------- */
      fetch("data/announcements.json")
        .then((res) => res.json())
        .then((data) => {
          const container = document.getElementById("announcements");
          container.innerHTML = "";

          if (!data.length) {
            container.innerHTML = "<p class='small'>No announcements yet.</p>";
            return;
          }

          data.forEach((item) => {
            const div = document.createElement("div");
            div.className = "question"; // reuse card styling

            div.innerHTML = `
              <strong>${item.title}</strong>
              <div class="small">${item.date}</div>
              <p>${renderMarkdown(item.message)}</p>
            `;

            container.appendChild(div);
          });
        });
    </script>
  </body>
</html>
